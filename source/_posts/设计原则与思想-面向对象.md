---
layout:    post
title:     设计原则与思想-面向对象
category:  设计模式之美
description: 设计原则与思想之面向对象
tags: 设计模式之美
date: 2020/10/22 14:25:10
---

## 设计模式之美

**封装**

封装也叫信息隐藏或数据访问保护。类通过暴露有限的访问接口，授权外部仅能通过类提供的方式来访问内部信息或者数据。

如果将类的属性都暴露给调用者，调用者想要正确的操作这些属性，就需要对业务细节有足够的了解。而这对于调用者来说也是一种负担。相反如果我们把属性封装起来，暴露少许的几个必要的方法给调用者使用，调用者就不需要了解太多背后的业务细节，用错的概率就会减少很多。封装存在的意义，一方面为了保护数据不被随意修改，提高代码的可维护性，另一方面仅暴露有限的必要接口，提高类的易用性

**抽象**

抽象主要是隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能如何实现。

抽象可以通过接口类或者抽象类实现，但也并不需要特殊的语法机制来支持。抽象存在的意义，一方面是提高代码的可扩展性、维护性，修改实现不需要改变定义，减少代码的改动范围。是处理复杂系统的有效手段，能有效过滤掉不必要关注的信息。

**继承**

用来表示类之间 is-a 的关系，比如猫是一种哺乳动物。继承可以实现代码复用，比如两个类有相同的方法和属性。不过，过度使用继承，继承层次过深过复杂，就会导致代码可读性、可维护性变差。

子类和父类高度耦合，修改父类的代码，会直接影响到子类。

**多态**

多态指子类可以替换父类，在实际的代码运行过程中，调用子类的方法实现。

多态可以提高代码的可扩展性和复用性

**面向对象的思考方式**

思考如何给业务建模，如何将需求翻译为类，如何给类之间建立交互关系，而完成这些工作完全不需要考虑错综复杂的处理流程。当有了类的设计之后，然后再像搭积木一样，按照处理流程，将类组装起来形成整个程序。这种开发模式、思考问题的方式，能让我们在应对复杂程序开发的时候，思路更加清晰。

**抽象类存在的意义**

抽象类也是为代码复用而生的。可以优雅的实现多态。抽象类可以保证类不会被实例化，如果强行为了多态，父类创建了空的方法，那么会有误调用的风险。抽象类也可以强制子类重写需要的方法，否则就会编译错误。

**接口存在的意义**

接口存在的意义是为了解耦。接口实现了方法的定义和实现分离，可以降低代码的耦合性，提高代码的扩展性。

**抽象类VS接口**

如果要表示is-a的关系，并且是为了解决代码复用的问题，那就使用抽象类。如果要是表示一种has-a的关系，并且是为了解决抽象而非代码复用的问题，那就使用接口。

从类的继承层次上看，抽象类是一种自下而上的设计思路，现有子类的代码重复，再抽象成上层的父类(抽象类)。接口是自上而下的设计思路，先设计接口，再去考虑具体的实现。

**基于接口而非实现编程**

应用这条原则，可以将接口与实现分离，封装不稳定的实现，暴露稳定的接口。上游系统面向接口而非实现编程，不依赖不稳定的实现细节，这样当实现发生变化的时候，上游系统代码基本上不需要改动，以此来降低耦合性，提高扩展性。越抽象，越顶层，越脱离具体某一实现的设计，越能提高代码的灵活性，越能应对未来的需求变化。好的代码设计，不仅能应对当下需求，而且在未来需求发生变化的时候，仍能够在不破坏原有代码设计的情况下灵活应对。

**组合VS继承**

鼓励多用组合少用继承，但是组合也并不是完美的，继承也并发一无是处。类之间的继承结构稳定（不会轻易改变），继承层次较浅，继承关系不复杂，就可以大胆的使用继承。系统不稳定，继承层次很深，继承关系复杂，就尽量使用组合来替代继承。

如果不能修改一个函数的入参类型，而入参又非接口，为了支持多态，只能采用继承来实现。比如FeignClient类，要修改encode()函数，只能通过继承来实现。

### 类之间交互关系

**泛化**

其实就是继承

**实现**

实现类实现接口

**聚合**

包含关系，A类对象包含B类对象，B类对象的生命周期可以不依赖A类对象的生命周期，也就是说单独销毁A类对象而不影响B对象。比如课程与学生之间的关系。

```java
public class A {
  private B b;
  public A(B b){
    this.b = b;
  }
}
```

**组合**

也是一种包含关系。A类对象包含B类对象，B类对象的生命周期依赖A类对象的生命周期，B类对象不可单独存在，比如鸟与翅膀之间的关系。

```java
public class A {
  private B b;
  publci A() {
    this.b = new B();
  }
}
```

**关联**

是一种非常弱的关系，包含聚合、组合两种关系。如果B类对象是A类的成员变量，那B类和A类就是关联关系。

```java
public class A {
  private B b;
  //通过构造器注入B对象 或者在构造器中new B对象
}
```

**依赖**

是一种比关联关系更加弱的关系，包含关联关系。不管是B类对象是A类对象的成员变量，还是A类的方法实用B类对象作为参数或者返回值、局部变量，只要B类对象和A类对象有任何使用关系，就都是依赖关系。

```java
public class A {
  public void func(B b) {...}
}
```





























